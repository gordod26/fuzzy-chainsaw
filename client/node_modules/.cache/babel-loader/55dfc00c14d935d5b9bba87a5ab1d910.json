{"ast":null,"code":"import { makeAutoObservable, toJS } from \"mobx\";\nexport default class RefStore {\n  constructor() {\n    this.yellowVerse = [];\n    this.postInput = \"\";\n    this.testArray = [{\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"1\"\n    }, {\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"2\"\n    }, {\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"3\"\n    }, {\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"5\"\n    }, {\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"10\"\n    }, {\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"9\"\n    }, {\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"17\"\n    }, {\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"16\"\n    }, {\n      book: \"Genesis\",\n      chapter: \"1\",\n      verse: \"18\"\n    }];\n    makeAutoObservable(this);\n  } //selected verse\n\n\n  logVerse(e) {\n    console.log(\"RefStore\", \"logVerse\", e);\n  } // push or remove verse from selected verse\n\n\n  yellowVerseHandler(book, chapter, verse) {\n    const obj = {\n      book: book,\n      chapter: chapter,\n      verse: verse\n    };\n    const index = this.yellowVerse.findIndex(item => item.book === obj.book && item.chapter === obj.chapter && item.verse === obj.verse);\n    this.yellowVerse.some(item => item.book === obj.book && item.chapter === obj.chapter && item.verse === obj.verse) ? this.yellowVerse.splice(index, 1) : this.yellowVerse.push(obj); //this.yellowVerse.push({ book: book, chapter: chapter, verse: verse });\n\n    console.log(\"RefStore\", \"yellowVerseHandler\", toJS(this.yellowVerse));\n    this.formatWithRanges();\n  }\n\n  postInputHandler(e) {\n    this.postInput = e.target.value;\n    console.log(\"Refstore\", \"postInputHandler\", toJS(this.postInput));\n  }\n\n  formatWithRanges() {\n    const vArr = this.testArray.map(i => Number(i.verse));\n    const current = vArr.sort((a, b) => {\n      return a - b;\n    });\n    let res = [],\n        last = null;\n\n    for (let x of current) {\n      if (last && last[1] + 1 === x) last[1]++;else res.push(last = [x, x]);\n    }\n\n    return res.map(r => r[0] === r[1] ? r[0] : r[0] + \"-\" + r[1]).join(\",\");\n  }\n\n  refFormatHandler() {\n    //current selection = testArray for Testing but will be yellowVerse for production\n    //put the array in ascending order by verse\n    const current = this.yellowVerse.sort((a, b) => {\n      return parseFloat(a.verse) - parseFloat(b.verse);\n    }); //console.log(toJS(current));\n\n    const shrtBk = current[0].book.slice(0, 3); //console.log(toJS(shrtBk));\n\n    let fmtdText = \"\";\n    let i = 0;\n\n    for (i = 0; i < current.length; i++) {\n      const zero = typeof current[i - 1] === \"undefined\" ? Number(current[i].verse) : Number(current[i - 1].verse);\n      const first = Number(current[i].verse);\n      const second = typeof current[i + 1] === \"undefined\" ? -1 : Number(current[i + 1].verse);\n      const third = typeof current[i + 2] === \"undefined\" ? -1 : Number(current[i + 2].verse);\n\n      if (i === 0) {\n        fmtdText += `${shrtBk} ${current[0].chapter}:${current[0].verse}`;\n      } else if (second - first === 1 && third - second === 1\n      /*&& second === not null*/\n      ) {\n          i++;\n        } else if (second - first === 1 && third - second !== 1 && first - zero !== 1) {\n        fmtdText += `,${first}`;\n      } else if (second - first === 1 && third - second !== 1\n      /*&& second === not null*/\n      ) {\n          fmtdText += `-${second}`;\n          i++;\n        } else if (second - first !== 1) {\n        fmtdText += `,${first}`;\n      }\n\n      console.log(fmtdText);\n    }\n  }\n\n} //0:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"1\"\n//1:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"2\"\n//2:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"3\"\n//3:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"5\"\n//4:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"10\"\n//5:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"9\"\n//6:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"17\"\n//7:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"16\"\n//8:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"18\"","map":{"version":3,"sources":["/home/david/src/bible_talk_live/src/mobx/RefStore.tsx"],"names":["makeAutoObservable","toJS","RefStore","constructor","yellowVerse","postInput","testArray","book","chapter","verse","logVerse","e","console","log","yellowVerseHandler","obj","index","findIndex","item","some","splice","push","formatWithRanges","postInputHandler","target","value","vArr","map","i","Number","current","sort","a","b","res","last","x","r","join","refFormatHandler","parseFloat","shrtBk","slice","fmtdText","length","zero","first","second","third"],"mappings":"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","sourcesContent":["import { makeAutoObservable, toJS } from \"mobx\";\nimport { parse } from \"path\";\nimport { ChangeEvent } from \"react\";\n\ninterface IRefStore {}\n\nexport default class RefStore {\n  constructor() {\n    makeAutoObservable(this);\n  }\n\n  //selected verse\n  yellowVerse: any[] = [];\n\n  logVerse(e: any) {\n    console.log(\"RefStore\", \"logVerse\", e);\n  }\n  // push or remove verse from selected verse\n  yellowVerseHandler(book: string, chapter: string, verse: string) {\n    const obj = { book: book, chapter: chapter, verse: verse };\n    const index = this.yellowVerse.findIndex(\n      (item) =>\n        item.book === obj.book &&\n        item.chapter === obj.chapter &&\n        item.verse === obj.verse\n    );\n    this.yellowVerse.some(\n      (item) =>\n        item.book === obj.book &&\n        item.chapter === obj.chapter &&\n        item.verse === obj.verse\n    )\n      ? this.yellowVerse.splice(index, 1)\n      : this.yellowVerse.push(obj);\n    //this.yellowVerse.push({ book: book, chapter: chapter, verse: verse });\n    console.log(\"RefStore\", \"yellowVerseHandler\", toJS(this.yellowVerse));\n    this.formatWithRanges();\n  }\n\n  postInput: string = \"\";\n\n  postInputHandler(e: ChangeEvent<HTMLTextAreaElement>) {\n    this.postInput = e.target.value;\n    console.log(\"Refstore\", \"postInputHandler\", toJS(this.postInput));\n  }\n\n  testArray = [\n    { book: \"Genesis\", chapter: \"1\", verse: \"1\" },\n    { book: \"Genesis\", chapter: \"1\", verse: \"2\" },\n    { book: \"Genesis\", chapter: \"1\", verse: \"3\" },\n    { book: \"Genesis\", chapter: \"1\", verse: \"5\" },\n    { book: \"Genesis\", chapter: \"1\", verse: \"10\" },\n    { book: \"Genesis\", chapter: \"1\", verse: \"9\" },\n    { book: \"Genesis\", chapter: \"1\", verse: \"17\" },\n    { book: \"Genesis\", chapter: \"1\", verse: \"16\" },\n    { book: \"Genesis\", chapter: \"1\", verse: \"18\" },\n  ];\n\n  formatWithRanges() {\n    const vArr = this.testArray.map((i) => Number(i.verse));\n    const current = vArr.sort((a, b) => {\n      return a - b;\n    });\n\n    let res = [],\n      last = null;\n\n    for (let x of current) {\n      if (last && last[1] + 1 === x) last[1]++;\n      else res.push((last = [x, x]));\n    }\n\n    return res.map((r) => (r[0] === r[1] ? r[0] : r[0] + \"-\" + r[1])).join(\",\");\n  }\n\n  refFormatHandler() {\n    //current selection = testArray for Testing but will be yellowVerse for production\n    //put the array in ascending order by verse\n    const current = this.yellowVerse.sort((a, b) => {\n      return parseFloat(a.verse) - parseFloat(b.verse);\n    });\n    //console.log(toJS(current));\n    const shrtBk = current[0].book.slice(0, 3);\n    //console.log(toJS(shrtBk));\n    let fmtdText = \"\";\n    let i = 0;\n\n    for (i = 0; i < current.length; i++) {\n      const zero =\n        typeof current[i - 1] === \"undefined\"\n          ? Number(current[i].verse)\n          : Number(current[i - 1].verse);\n      const first = Number(current[i].verse);\n      const second =\n        typeof current[i + 1] === \"undefined\"\n          ? -1\n          : Number(current[i + 1].verse);\n      const third =\n        typeof current[i + 2] === \"undefined\"\n          ? -1\n          : Number(current[i + 2].verse);\n      if (i === 0) {\n        fmtdText += `${shrtBk} ${current[0].chapter}:${current[0].verse}`;\n      } else if (\n        second - first === 1 &&\n        third - second === 1 /*&& second === not null*/\n      ) {\n        i++;\n      } else if (\n        second - first === 1 &&\n        third - second !== 1 &&\n        first - zero !== 1\n      ) {\n        fmtdText += `,${first}`;\n      } else if (\n        second - first === 1 &&\n        third - second !== 1 /*&& second === not null*/\n      ) {\n        fmtdText += `-${second}`;\n        i++;\n      } else if (second - first !== 1) {\n        fmtdText += `,${first}`;\n      }\n      console.log(fmtdText);\n    }\n  }\n}\n\n//0:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"1\"\n//1:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"2\"\n//2:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"3\"\n//3:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"5\"\n//4:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"10\"\n//5:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"9\"\n//6:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"17\"\n//7:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"16\"\n//8:\n//book: \"Genesis\"\n//chapter: \"1\"\n//verse: \"18\"\n"]},"metadata":{},"sourceType":"module"}